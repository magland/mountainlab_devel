// need math.h

int n;
float c[n][3], t, x;
float grey=0.6, sat=0.65, bri=0.7;        // adj params
int i, dummy;

c[n-1][0] = grey; c[n-1][1] = grey; c[n-1][2] = grey;
c[n-2][0] = 1.0; c[n-2][1] = 1.0; c[n-2][2] = 1.0;

n -= 2;
for (i=0;++i;i<n) {
  t = 6.0*i/n;
  t = t + 0.2*sinf(2.0*M_PI/3.0*(t-2.5));
  for (j=0;++j;j<3) {
    t = 6.0*modff(t/6.0, &dummy);    // does mod by 6
    x = 2.0-fabsf(t-3.0);
    if (x<0) x=0;
    if (x>1) x=1;
    c[i][j] = x;
    t = t - 2.0; 
  }
  if (i%2)
    for (j=0;++j;j<3)
      c[i][j] = sat*c[i][j] + (1.0-sat);
  if (i%4 == 1)
    for (j=0;++j;j<3)
      c[i][j] *= bri;
 }

/////  crap for picking cycle...

static int primes[168] = {2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997};
static float phi = (sqrtf(5.0)-1)/2;

int jump;
int i=0;
while (primes[i]<phi*n) i+=1;
if (n<=2)
  jump=1;
else
  jump = primes[i-1];


/// matlab-generated colors...

static float c[256][3] = {
{ 0.201, 0.000, 1.000 },
{ 0.467, 1.000, 0.350 },
{ 1.000, 0.000, 0.761 },
{ 0.245, 0.700, 0.656 },
{ 1.000, 0.839, 0.000 },
{ 0.746, 0.350, 1.000 },
{ 0.000, 1.000, 0.059 },
{ 0.700, 0.245, 0.435 },
{ 0.000, 0.555, 1.000 },
{ 0.782, 1.000, 0.350 },
{ 0.894, 0.000, 1.000 },
{ 0.245, 0.700, 0.394 },
{ 1.000, 0.055, 0.000 },
{ 0.350, 0.353, 1.000 },
{ 0.296, 1.000, 0.000 },
{ 0.700, 0.245, 0.641 },
{ 0.000, 1.000, 0.708 },
{ 1.000, 0.747, 0.350 },
{ 0.458, 0.000, 1.000 },
{ 0.262, 0.700, 0.245 },
{ 1.000, 0.000, 0.575 },
{ 0.350, 0.861, 1.000 },
{ 0.855, 1.000, 0.000 },
{ 0.604, 0.245, 0.700 },
{ 0.000, 1.000, 0.207 },
{ 1.000, 0.350, 0.450 },
{ 0.000, 0.225, 1.000 },
{ 0.441, 0.700, 0.245 },
{ 1.000, 0.000, 0.968 },
{ 0.350, 1.000, 0.697 },
{ 1.000, 0.378, 0.000 },
{ 0.374, 0.245, 0.700 },
{ 0.135, 1.000, 0.000 },
{ 1.000, 0.350, 0.811 },
{ 0.000, 1.000, 0.994 },
{ 0.700, 0.670, 0.245 },
{ 0.667, 0.000, 1.000 },
{ 0.350, 1.000, 0.416 },
{ 1.000, 0.000, 0.344 },
{ 0.245, 0.452, 0.700 },
{ 0.590, 1.000, 0.000 },
{ 0.958, 0.350, 1.000 },
{ 0.000, 1.000, 0.384 },
{ 0.700, 0.313, 0.245 },
{ 0.086, 0.000, 1.000 },
{ 0.509, 1.000, 0.350 },
{ 1.000, 0.000, 0.825 },
{ 0.245, 0.700, 0.604 },
{ 1.000, 0.710, 0.000 },
{ 0.692, 0.350, 1.000 },
{ 0.000, 1.000, 0.005 },
{ 0.700, 0.245, 0.477 },
{ 0.000, 0.688, 1.000 },
{ 0.851, 1.000, 0.350 },
{ 0.835, 0.000, 1.000 },
{ 0.245, 0.700, 0.361 },
{ 1.000, 0.000, 0.067 },
{ 0.350, 0.434, 1.000 },
{ 0.371, 1.000, 0.000 },
{ 0.700, 0.245, 0.667 },
{ 0.000, 1.000, 0.606 },
{ 1.000, 0.661, 0.350 },
{ 0.361, 0.000, 1.000 },
{ 0.287, 0.700, 0.245 },
{ 1.000, 0.000, 0.654 },
{ 0.350, 0.944, 1.000 },
{ 0.973, 1.000, 0.000 },
{ 0.573, 0.245, 0.700 },
{ 0.000, 1.000, 0.145 },
{ 1.000, 0.350, 0.522 },
{ 0.000, 0.356, 1.000 },
{ 0.481, 0.700, 0.245 },
{ 0.977, 0.000, 1.000 },
{ 0.350, 1.000, 0.640 },
{ 1.000, 0.247, 0.000 },
{ 0.324, 0.245, 0.700 },
{ 0.196, 1.000, 0.000 },
{ 1.000, 0.350, 0.855 },
{ 0.000, 1.000, 0.875 },
{ 0.700, 0.612, 0.245 },
{ 0.589, 0.000, 1.000 },
{ 0.350, 1.000, 0.380 },
{ 1.000, 0.000, 0.442 },
{ 0.245, 0.513, 0.700 },
{ 0.691, 1.000, 0.000 },
{ 0.922, 0.350, 1.000 },
{ 0.000, 1.000, 0.308 },
{ 0.700, 0.256, 0.245 },
{ 0.000, 0.035, 1.000 },
{ 0.554, 1.000, 0.350 },
{ 1.000, 0.000, 0.884 },
{ 0.245, 0.700, 0.555 },
{ 1.000, 0.578, 0.000 },
{ 0.632, 0.350, 1.000 },
{ 0.050, 1.000, 0.000 },
{ 0.700, 0.245, 0.516 },
{ 0.000, 0.818, 1.000 },
{ 0.925, 1.000, 0.350 },
{ 0.772, 0.000, 1.000 },
{ 0.245, 0.700, 0.332 },
{ 1.000, 0.000, 0.183 },
{ 0.350, 0.517, 1.000 },
{ 0.453, 1.000, 0.000 },
{ 0.700, 0.245, 0.692 },
{ 0.000, 1.000, 0.512 },
{ 1.000, 0.574, 0.350 },
{ 0.256, 0.000, 1.000 },
{ 0.313, 0.700, 0.245 },
{ 1.000, 0.000, 0.727 },
{ 0.350, 1.000, 0.976 },
{ 1.000, 0.903, 0.000 },
{ 0.540, 0.245, 0.700 },
{ 0.000, 1.000, 0.087 },
{ 1.000, 0.350, 0.590 },
{ 0.000, 0.489, 1.000 },
{ 0.524, 0.700, 0.245 },
{ 0.922, 0.000, 1.000 },
{ 0.350, 1.000, 0.587 },
{ 1.000, 0.118, 0.000 },
{ 0.271, 0.245, 0.700 },
{ 0.262, 1.000, 0.000 },
{ 1.000, 0.350, 0.896 },
{ 0.000, 1.000, 0.762 },
{ 0.700, 0.553, 0.245 },
{ 0.503, 0.000, 1.000 },
{ 0.356, 1.000, 0.350 },
{ 1.000, 0.000, 0.533 },
{ 0.245, 0.573, 0.700 },
{ 0.799, 1.000, 0.000 },
{ 0.883, 0.350, 1.000 },
{ 0.000, 1.000, 0.239 },
{ 0.700, 0.245, 0.289 },
{ 0.000, 0.161, 1.000 },
{ 0.604, 1.000, 0.350 },
{ 1.000, 0.000, 0.941 },
{ 0.245, 0.700, 0.510 },
{ 1.000, 0.445, 0.000 },
{ 0.568, 0.350, 1.000 },
{ 0.106, 1.000, 0.000 },
{ 0.700, 0.245, 0.551 },
{ 0.000, 0.945, 1.000 },
{ 1.000, 0.997, 0.350 },
{ 0.704, 0.000, 1.000 },
{ 0.245, 0.700, 0.304 },
{ 1.000, 0.000, 0.292 },
{ 0.350, 0.603, 1.000 },
{ 0.542, 1.000, 0.000 },
{ 0.683, 0.245, 0.700 },
{ 0.000, 1.000, 0.425 },
{ 1.000, 0.489, 0.350 },
{ 0.145, 0.000, 1.000 },
{ 0.341, 0.700, 0.245 },
{ 1.000, 0.000, 0.793 },
{ 0.350, 1.000, 0.900 },
{ 1.000, 0.775, 0.000 },
{ 0.504, 0.245, 0.700 },
{ 0.000, 1.000, 0.032 },
{ 1.000, 0.350, 0.653 },
{ 0.000, 0.622, 1.000 },
{ 0.571, 0.700, 0.245 },
{ 0.865, 0.000, 1.000 },
{ 0.350, 1.000, 0.539 },
{ 1.000, 0.000, 0.006 },
{ 0.245, 0.275, 0.700 },
{ 0.333, 1.000, 0.000 },
{ 1.000, 0.350, 0.934 },
{ 0.000, 1.000, 0.656 },
{ 0.700, 0.493, 0.245 },
{ 0.410, 0.000, 1.000 },
{ 0.392, 1.000, 0.350 },
{ 1.000, 0.000, 0.616 },
{ 0.245, 0.632, 0.700 },
{ 0.914, 1.000, 0.000 },
{ 0.841, 0.350, 1.000 },
{ 0.000, 1.000, 0.175 },
{ 0.700, 0.245, 0.341 },
{ 0.000, 0.290, 1.000 },
{ 0.658, 1.000, 0.350 },
{ 1.000, 0.000, 0.995 },
{ 0.245, 0.700, 0.468 },
{ 1.000, 0.312, 0.000 },
{ 0.499, 0.350, 1.000 },
{ 0.165, 1.000, 0.000 },
{ 0.700, 0.245, 0.584 },
{ 0.000, 1.000, 0.933 },
{ 1.000, 0.916, 0.350 },
{ 0.629, 0.000, 1.000 },
{ 0.245, 0.700, 0.278 },
{ 1.000, 0.000, 0.394 },
{ 0.350, 0.689, 1.000 },
{ 0.639, 1.000, 0.000 },
{ 0.658, 0.245, 0.700 },
{ 0.000, 1.000, 0.346 },
{ 1.000, 0.406, 0.350 },
{ 0.027, 0.000, 1.000 },
{ 0.372, 0.700, 0.245 },
{ 1.000, 0.000, 0.855 },
{ 0.350, 1.000, 0.828 },
{ 1.000, 0.644, 0.000 },
{ 0.464, 0.245, 0.700 },
{ 0.023, 1.000, 0.000 },
{ 1.000, 0.350, 0.710 },
{ 0.000, 0.753, 1.000 },
{ 0.621, 0.700, 0.245 },
{ 0.804, 0.000, 1.000 },
{ 0.350, 1.000, 0.495 },
{ 1.000, 0.000, 0.125 },
{ 0.245, 0.333, 0.700 },
{ 0.411, 1.000, 0.000 },
{ 1.000, 0.350, 0.970 },
{ 0.000, 1.000, 0.558 },
{ 0.700, 0.432, 0.245 },
{ 0.309, 0.000, 1.000 },
{ 0.428, 1.000, 0.350 },
{ 1.000, 0.000, 0.692 },
{ 0.245, 0.689, 0.700 },
{ 1.000, 0.965, 0.000 },
{ 0.796, 0.350, 1.000 },
{ 0.000, 1.000, 0.116 },
{ 0.700, 0.245, 0.390 },
{ 0.000, 0.422, 1.000 },
{ 0.718, 1.000, 0.350 },
{ 0.950, 0.000, 1.000 },
{ 0.245, 0.700, 0.429 },
{ 1.000, 0.182, 0.000 },
{ 0.425, 0.350, 1.000 },
{ 0.228, 1.000, 0.000 },
{ 0.700, 0.245, 0.613 },
{ 0.000, 1.000, 0.817 },
{ 1.000, 0.833, 0.350 },
{ 0.547, 0.000, 1.000 },
{ 0.245, 0.700, 0.253 },
{ 1.000, 0.000, 0.488 },
{ 0.350, 0.776, 1.000 },
{ 0.744, 1.000, 0.000 },
{ 0.632, 0.245, 0.700 },
{ 0.000, 1.000, 0.273 },
{ 1.000, 0.350, 0.374 },
{ 0.000, 0.097, 1.000 },
{ 0.405, 0.700, 0.245 },
{ 1.000, 0.000, 0.913 },
{ 0.350, 1.000, 0.760 },
{ 1.000, 0.511, 0.000 },
{ 0.421, 0.245, 0.700 },
{ 0.078, 1.000, 0.000 },
{ 1.000, 0.350, 0.763 },
{ 0.000, 0.882, 1.000 },
{ 0.674, 0.700, 0.245 },
{ 0.738, 0.000, 1.000 },
{ 0.350, 1.000, 0.454 },
{ 1.000, 0.000, 0.238 },
{ 0.245, 0.392, 0.700 },
{ 0.497, 1.000, 0.000 },
{ 0.994, 0.350, 1.000 },
{ 0.000, 1.000, 0.467 },
{ 0.700, 0.372, 0.245 },
};
